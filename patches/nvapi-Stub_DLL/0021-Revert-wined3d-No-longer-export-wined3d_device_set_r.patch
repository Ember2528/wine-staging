From 7b855cbf5192392bb0fb2c2fc0ce158886ae220f Mon Sep 17 00:00:00 2001
From: Alistair Leslie-Hughes <leslie_alistair@hotmail.com>
Date: Thu, 6 May 2021 08:36:06 +1000
Subject: [PATCH] Revert "wined3d: No longer export
 wined3d_device_set_render_state()."

This reverts commit 2b924c7f4168345cef498e0c36c471d3c9c088e9.
---
 dlls/wined3d/device.c     | 4 +++-
 dlls/wined3d/wined3d.spec | 1 +
 include/wine/wined3d.h    | 2 ++
 3 files changed, 6 insertions(+), 1 deletion(-)

diff --git a/dlls/wined3d/device.c b/dlls/wined3d/device.c
index b62b07fd51e..a699e21dda3 100644
--- a/dlls/wined3d/device.c
+++ b/dlls/wined3d/device.c
@@ -1595,9 +1595,11 @@ struct wined3d_rasterizer_state * CDECL wined3d_device_context_get_rasterizer_st
     return context->state->rasterizer_state;
 }
 
-static void wined3d_device_set_render_state(struct wined3d_device *device,
+void CDECL wined3d_device_set_render_state(struct wined3d_device *device,
         enum wined3d_render_state state, DWORD value)
 {
+    TRACE("device %p, state %s (%#x), value %#x.\n", device, debug_d3drenderstate(state), state, value);
+
     if (state > WINEHIGHEST_RENDER_STATE)
     {
         WARN("Unhandled render state %#x.\n", state);
diff --git a/dlls/wined3d/wined3d.spec b/dlls/wined3d/wined3d.spec
index ece69929c65..f8b6dac66da 100644
--- a/dlls/wined3d/wined3d.spec
+++ b/dlls/wined3d/wined3d.spec
@@ -73,6 +73,7 @@
 @ cdecl wined3d_device_set_max_frame_latency(ptr long)
 @ cdecl wined3d_device_set_multithreaded(ptr)
 @ cdecl wined3d_device_set_npatch_mode(ptr float)
+@ cdecl wined3d_device_set_render_state(ptr long long)
 @ cdecl wined3d_device_set_software_vertex_processing(ptr long)
 @ cdecl wined3d_device_show_cursor(ptr long)
 @ cdecl wined3d_device_update_texture(ptr ptr ptr)
diff --git a/include/wine/wined3d.h b/include/wine/wined3d.h
index ec35668856e..cab324abc9a 100644
--- a/include/wine/wined3d.h
+++ b/include/wine/wined3d.h
@@ -2402,6 +2402,8 @@ void __cdecl wined3d_device_set_gamma_ramp(const struct wined3d_device *device,
 void __cdecl wined3d_device_set_max_frame_latency(struct wined3d_device *device, unsigned int max_frame_latency);
 void __cdecl wined3d_device_set_multithreaded(struct wined3d_device *device);
 HRESULT __cdecl wined3d_device_set_npatch_mode(struct wined3d_device *device, float segments);
+void __cdecl wined3d_device_set_render_state(struct wined3d_device *device,
+        enum wined3d_render_state state, DWORD value);
 void __cdecl wined3d_device_set_software_vertex_processing(struct wined3d_device *device, BOOL software);
 BOOL __cdecl wined3d_device_show_cursor(struct wined3d_device *device, BOOL show);
 HRESULT __cdecl wined3d_device_update_texture(struct wined3d_device *device,
-- 
2.30.2

